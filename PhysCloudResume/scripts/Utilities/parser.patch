@@ -9,7 +9,8 @@
 // See https://swift.org/CONTRIBUTORS.txt for the list of Swift project authors
 //
 //===----------------------------------------------------------------------===//
-
+import OrderedCollections
+import Foundation

 internal struct JSONParser {
     var reader: DocumentReader
@@ -142,7 +143,7 @@

     // MARK: - Object parsing -

-    mutating func parseObject() throws -> [String: JSONValue] {
+    mutating func parseObject() throws -> OrderedDictionary<String, JSONValue> {
         precondition(self.reader.read() == ._openbrace)
         guard self.depth < 512 else {
             throw JSONError.tooManyNestedArraysOrDictionaries(characterIndex: self.reader.readerIndex - 1)
@@ -162,7 +163,7 @@
             break
         }

-        var object = [String: JSONValue]()
+        var object = OrderedDictionary<String, JSONValue>()
         object.reserveCapacity(20)

         while true {
@@ -663,3 +664,29 @@
     case singleFragmentFoundButNotAllowed
     case invalidUTF8Sequence(Data, characterIndex: Int)
 }
+
+enum JSONValue: Equatable {
+    case null
+    case array([JSONValue])
+    case object(OrderedDictionary<String, JSONValue>)
+    case bool(Bool)
+    case string(String)
+    case number(String)
+
+    func unwrap() throws -> Any {
+        switch self {
+        case .null: return NSNull()
+        case let .array(values): return try values.map { try $0.unwrap() }
+        case let .object(object): return try object.mapValues { try $0.unwrap() }
+        case let .bool(bool): return NSNumber(value: bool)
+        case let .string(string): return string
+        case let .number(string):
+            let formatter = NumberFormatter()
+            formatter.numberStyle = .decimal
+            guard let number = formatter.number(from: string) else {
+                throw JSONError.numberIsNotRepresentableInSwift(parsed: string)
+            }
+            return number
+        }
+    }
+}